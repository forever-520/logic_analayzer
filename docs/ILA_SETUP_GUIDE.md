# ğŸ” ILA è°ƒè¯•é…ç½®æŒ‡å—

## ğŸ“‹ ç›®æ ‡

ä½¿ç”¨ Vivado ILAï¼ˆIntegrated Logic Analyzerï¼‰ç›‘æ§ UART å‘é€æ¨¡å—çš„å†…éƒ¨ä¿¡å·ï¼ŒéªŒè¯æ•°æ®æ˜¯å¦æ­£ç¡®ã€‚

---

## âœ… å½“å‰çŠ¶æ€æ£€æŸ¥

### 1. çº¦æŸæ–‡ä»¶å·²æ›´æ–° âœ…

**æ–‡ä»¶**: `src/logic_analyzer.xdc`

å·²æ·»åŠ çš„å¼•è„šçº¦æŸï¼š
```tcl
# UART TX å¼•è„šï¼ˆè¿æ¥åˆ° CH340 RX æˆ–æ¿è½½ä¸²å£ï¼‰
set_property PACKAGE_PIN V18 [get_ports uart_tx]
set_property IOSTANDARD LVCMOS33 [get_ports uart_tx]

# LED æŒ‡ç¤ºç¯ï¼ˆå¯é€‰ï¼Œç›®å‰æ³¨é‡Šæ‰ï¼‰
# å¦‚æœéœ€è¦çœ‹åˆ° LED çŠ¶æ€ï¼Œå–æ¶ˆæ³¨é‡Šå¹¶ä¿®æ”¹å¼•è„šå·
# set_property PACKAGE_PIN M14 [get_ports led_capturing]
# set_property PACKAGE_PIN M15 [get_ports led_triggered]
# set_property PACKAGE_PIN L14 [get_ports led_done]
```

âš ï¸ **é‡è¦**ï¼š
- `PACKAGE_PIN V18` æ˜¯ç¤ºä¾‹å¼•è„šï¼Œè¯·æ ¹æ®ä½ çš„å¼€å‘æ¿åŸç†å›¾ä¿®æ”¹
- å¦‚æœä½ çš„æ¿å­æœ‰æ¿è½½ UARTï¼ŒæŸ¥æ‰¾åŸç†å›¾ä¸­çš„ `UART_TXD` å¼•è„š
- å¦‚æœä½¿ç”¨å¤–éƒ¨ CH340ï¼Œå¯ä»¥é€‰æ‹©ä»»æ„ç©ºé—² IO å¼•è„š

---

## ğŸ› ï¸ ILA é…ç½®æ­¥éª¤

### æ­¥éª¤ 1ï¼šåœ¨ Vivado ä¸­æ·»åŠ  ILA IP æ ¸

#### æ–¹æ³• Aï¼šé€šè¿‡ IP Catalog æ·»åŠ ï¼ˆæ¨èï¼‰

1. **æ‰“å¼€ Vivado é¡¹ç›®**ï¼š
   ```
   E:\fpga_class\vivado\logic_analyzer\logic_analyzer\logic_analyzer.xpr
   ```

2. **æ·»åŠ  ILA IP**ï¼š
   - ç‚¹å‡»å·¦ä¾§ **IP Catalog**
   - æœç´¢ `ILA`
   - åŒå‡» **ILA (Integrated Logic Analyzer)**

3. **é…ç½® ILA**ï¼š

   **General Options**ï¼š
   - Number of Probes: `8`ï¼ˆæˆ‘ä»¬è¦ç›‘æ§ 8 ä¸ªä¿¡å·ï¼‰
   - Sample Data Depth: `8192`ï¼ˆè¶³å¤Ÿæ•è·çº¦ 70 ä¸ªå­—èŠ‚çš„æ•°æ®ï¼‰
   - Capture Control: `âœ“ Enable`ï¼ˆå…è®¸æ‰‹åŠ¨è§¦å‘ï¼‰

   **Probe Ports**ï¼š

   | Probe | Width | æè¿° | ä¿¡å·å |
   |-------|-------|------|--------|
   | probe0 | 8 | å‘é€çš„å­—èŠ‚æ•°æ® | u_uart_streamer.tx_data |
   | probe1 | 1 | å‘é€è¯·æ±‚ | u_uart_streamer.tx_valid |
   | probe2 | 1 | ç©ºé—²æ ‡å¿— | u_uart_streamer.u_tx.tx_ready |
   | probe3 | 1 | å‘é€å¿™ | u_uart_streamer.busy |
   | probe4 | 11 | BRAM è¯»åœ°å€ | u_uart_streamer.rd_addr |
   | probe5 | 2 | çŠ¶æ€æœºçŠ¶æ€ | u_uart_streamer.state |
   | probe6 | 1 | UART TX å¼•è„š | uart_tx |
   | probe7 | 1 | é‡‡æ ·å®Œæˆæ ‡å¿— | capture_done |

4. **ç”Ÿæˆ IP**ï¼š
   - ç‚¹å‡» **Generate**
   - ç­‰å¾…ç”Ÿæˆå®Œæˆ

---

#### æ–¹æ³• Bï¼šç›´æ¥ä¿®æ”¹ fpga_top.v æ·»åŠ  ILA å®ä¾‹ï¼ˆæ›´å¿«ï¼‰

åœ¨ `src/fpga_top.v` ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

**ä½ç½®**ï¼šåœ¨ `endmodule` ä¹‹å‰æ·»åŠ 

```verilog
// ============================================================================
// ILA Debug: Monitor UART signals (only in synthesis, not simulation)
// ============================================================================
`ifndef SIMULATION
    (* MARK_DEBUG = "TRUE" *) wire [7:0]  ila_tx_data;
    (* MARK_DEBUG = "TRUE" *) wire        ila_tx_valid;
    (* MARK_DEBUG = "TRUE" *) wire        ila_tx_ready;
    (* MARK_DEBUG = "TRUE" *) wire        ila_busy;
    (* MARK_DEBUG = "TRUE" *) wire [10:0] ila_rd_addr;
    (* MARK_DEBUG = "TRUE" *) wire [2:0]  ila_state;
    (* MARK_DEBUG = "TRUE" *) wire        ila_uart_tx;
    (* MARK_DEBUG = "TRUE" *) wire        ila_capture_done;

    // Connect to internal signals
    assign ila_tx_data      = u_uart_streamer.tx_data;
    assign ila_tx_valid     = u_uart_streamer.tx_valid;
    assign ila_tx_ready     = u_uart_streamer.u_tx.tx_ready;
    assign ila_busy         = u_uart_streamer.busy;
    assign ila_rd_addr      = u_uart_streamer.rd_addr;
    assign ila_state        = u_uart_streamer.state;
    assign ila_uart_tx      = uart_tx;
    assign ila_capture_done = capture_done;
`endif
```

**ä¼˜ç‚¹**ï¼š
- âœ… ä½¿ç”¨ `MARK_DEBUG` å±æ€§ï¼ŒVivado ä¼šè‡ªåŠ¨ç”Ÿæˆ ILA
- âœ… ä¸éœ€è¦æ‰‹åŠ¨å®ä¾‹åŒ– ILA IP
- âœ… æ›´ç®€æ´ï¼Œæ˜“äºç»´æŠ¤

**ä½¿ç”¨æ–¹æ³•**ï¼š
1. æ·»åŠ ä¸Šè¿°ä»£ç åˆ° fpga_top.v
2. è¿è¡Œç»¼åˆï¼ˆSynthesisï¼‰
3. Vivado ä¼šè‡ªåŠ¨æ’å…¥ ILA æ ¸å¿ƒ

---

### æ­¥éª¤ 2ï¼šè¿è¡Œç»¼åˆå’Œå®ç°

1. **è¿è¡Œ Synthesis**ï¼š
   - ç‚¹å‡»å·¦ä¾§ **Run Synthesis**
   - ç­‰å¾…å®Œæˆï¼ˆçº¦ 2-5 åˆ†é’Ÿï¼‰

2. **æ£€æŸ¥ ILA æ˜¯å¦æ·»åŠ **ï¼š
   - ç»¼åˆå®Œæˆåï¼Œæ‰“å¼€ **Synthesized Design**
   - åœ¨ **Netlist** çª—å£ä¸­æœç´¢ `ila` æˆ– `dbg_hub`
   - åº”è¯¥èƒ½çœ‹åˆ° ILA å®ä¾‹

3. **è¿è¡Œ Implementation**ï¼š
   - ç‚¹å‡» **Run Implementation**
   - ç­‰å¾…å®Œæˆ

4. **ç”Ÿæˆ Bitstream**ï¼š
   - ç‚¹å‡» **Generate Bitstream**
   - ç”Ÿæˆ `.bit` å’Œ `.ltx` æ–‡ä»¶ï¼ˆè°ƒè¯•æ¢é’ˆæ–‡ä»¶ï¼‰

---

### æ­¥éª¤ 3ï¼šä¸‹è½½åˆ° FPGA å¹¶è°ƒè¯•

#### 3.1 è¿æ¥ç¡¬ä»¶

1. **è¿æ¥ FPGA å¼€å‘æ¿**ï¼š
   - USB JTAG çº¿è¿æ¥åˆ°ç”µè„‘
   - å¼€å‘æ¿ä¸Šç”µ

2. **æ‰“å¼€ Hardware Manager**ï¼š
   - Vivado èœå•ï¼š**Flow â†’ Open Hardware Manager**
   - ç‚¹å‡» **Open Target â†’ Auto Connect**

3. **ä¸‹è½½ Bitstream**ï¼š
   - å³é”®ç‚¹å‡» FPGA è®¾å¤‡
   - é€‰æ‹© **Program Device**
   - é€‰æ‹©ç”Ÿæˆçš„ `.bit` æ–‡ä»¶
   - âœ… **å‹¾é€‰ "Refresh device after programming"**
   - ç‚¹å‡» **Program**

#### 3.2 é…ç½® ILA è§¦å‘æ¡ä»¶

ä¸‹è½½å®Œæˆåï¼ŒHardware Manager ä¼šè‡ªåŠ¨æ‰“å¼€ ILA è°ƒè¯•çª—å£ã€‚

**æ¨èè§¦å‘é…ç½®**ï¼š

**æ–¹æ¡ˆ Aï¼šè§¦å‘åœ¨ busy ä¸Šå‡æ²¿ï¼ˆæ¨èï¼‰**

è¿™æ ·å¯ä»¥æ•è·ä»å‘é€å¼€å§‹çš„æ‰€æœ‰æ•°æ®ï¼š

```
Trigger Setup:
  probe3 (ila_busy):
    â—‹ ==  â— R (Rising Edge)
```

**å«ä¹‰**ï¼šå½“ `busy` ä» 0 å˜ä¸º 1 æ—¶è§¦å‘æ•è·ï¼Œæ­£å¥½æ˜¯å¼€å§‹å‘é€å¸§å¤´çš„æ—¶åˆ»ã€‚

---

**æ–¹æ¡ˆ Bï¼šè§¦å‘åœ¨ tx_valid ä¸Šå‡æ²¿**

æ•è·æ¯æ¬¡å­—èŠ‚å‘é€ï¼š

```
Trigger Setup:
  probe1 (ila_tx_valid):
    â—‹ ==  â— R (Rising Edge)
```

**å«ä¹‰**ï¼šæ¯æ¬¡å‡†å¤‡å‘é€æ–°å­—èŠ‚æ—¶è§¦å‘ã€‚

---

**æ–¹æ¡ˆ Cï¼šè§¦å‘åœ¨ç‰¹å®šæ•°æ®å€¼ï¼ˆæŸ¥æ‰¾å¸§å¤´ï¼‰**

æ•è·å‘é€ 0x55ï¼ˆå¸§å¤´ç¬¬ä¸€å­—èŠ‚ï¼‰æ—¶åˆ»ï¼š

```
Trigger Setup:
  probe0 (ila_tx_data):
    â— == [01010101] (0x55 äºŒè¿›åˆ¶)
  probe1 (ila_tx_valid):
    â— == 1
```

**å«ä¹‰**ï¼šå½“å‘é€çš„æ•°æ®æ˜¯ 0x55 ä¸” tx_valid=1 æ—¶è§¦å‘ã€‚

---

#### 3.3 è¿è¡Œæ•è·

1. **è®¾ç½®æ•è·çª—å£**ï¼š
   - Trigger Position: `512`ï¼ˆæ•è·è§¦å‘å‰ 512 samplesï¼Œè§¦å‘å 7680 samplesï¼‰
   - è¿™æ ·å¯ä»¥çœ‹åˆ°è§¦å‘å‰åçš„å®Œæ•´æ•°æ®

2. **å¯åŠ¨æ•è·**ï¼š
   - ç‚¹å‡»å·¥å…·æ çš„ **â–¶ Run Trigger** æŒ‰é’®
   - ILA è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ˆæ˜¾ç¤º "Waiting for Trigger"ï¼‰

3. **è§¦å‘é‡‡æ ·**ï¼š
   - åœ¨ FPGA å¼€å‘æ¿ä¸ŠæŒ‰ä¸‹ **RUN æŒ‰é’®**ï¼ˆbtn_trigger_enï¼‰
   - é€»è¾‘åˆ†æå™¨å¼€å§‹é‡‡æ ·
   - é‡‡æ ·å®Œæˆåï¼ŒUART å¼€å§‹å‘é€
   - ILA åº”è¯¥ç«‹å³è§¦å‘å¹¶æ•è·æ•°æ®

---

### æ­¥éª¤ 4ï¼šåˆ†ææ³¢å½¢

#### æŸ¥çœ‹å…³é”®ä¿¡å·

æ•è·å®Œæˆåï¼Œåœ¨ ILA æ³¢å½¢çª—å£ä¸­æ£€æŸ¥ï¼š

**1. probe3 (busy) ä¿¡å·**ï¼š
```
busy: __________â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”__________
                â†‘ å¼€å§‹å‘é€                        â†‘ å‘é€å®Œæˆ
```
- åº”è¯¥çœ‹åˆ°ä¸€ä¸ªé•¿æ—¶é—´çš„é«˜ç”µå¹³ï¼ˆçº¦ 178ms = 8,900,000 ä¸ªæ—¶é’Ÿå‘¨æœŸï¼‰
- å¦‚æœ busy å¾ˆå¿«å›åˆ° 0ï¼Œè¯´æ˜å‘é€æ²¡æœ‰æ­£å¸¸å·¥ä½œ

---

**2. probe0 (tx_data) æ•°æ®å€¼**ï¼š

å±•å¼€ tx_dataï¼Œåˆ‡æ¢æ˜¾ç¤ºæ ¼å¼ä¸º **Hexadecimal**ï¼š

```
Time    | tx_valid | tx_data | è¯´æ˜
--------|----------|---------|------------------
T0      | 0        | xx      | ç©ºé—²
T1      | 1        | 55      | å¸§å¤´å­—èŠ‚ 1: 0x55 âœ…
T2      | 1        | AA      | å¸§å¤´å­—èŠ‚ 2: 0xAA âœ…
T3      | 1        | 00      | é•¿åº¦ä½å­—èŠ‚: 0x00 (LEN_L)
T4      | 1        | 08      | é•¿åº¦é«˜å­—èŠ‚: 0x08 (LEN_H) â†’ 0x0800 = 2048 âœ…
T5      | 1        | 01      | è§¦å‘ç´¢å¼•ä½å­—èŠ‚: 0x01 (TRIG_L)
T6      | 1        | 00      | è§¦å‘ç´¢å¼•é«˜å­—èŠ‚: 0x00 (TRIG_H) â†’ è§¦å‘ç‚¹=1
T7      | 1        | 21      | æ•°æ®å­—èŠ‚ 0ï¼ˆæ ¹æ® test_signal_genï¼‰
T8      | 1        | 21      | æ•°æ®å­—èŠ‚ 1
...
```

**é¢„æœŸç»“æœ**ï¼š
- âœ… å‰ä¸¤ä¸ªå­—èŠ‚å¿…é¡»æ˜¯ `55 AA`
- âœ… ç¬¬ 3-4 å­—èŠ‚åº”è¯¥æ˜¯ `00 08`ï¼ˆå°ç«¯åºï¼Œè¡¨ç¤º 2048ï¼‰
- âœ… ç¬¬ 5-6 å­—èŠ‚æ˜¯è§¦å‘ç´¢å¼•ï¼ˆå–å†³äºè§¦å‘æ—¶åˆ»ï¼‰
- âœ… ä»ç¬¬ 7 å­—èŠ‚å¼€å§‹æ˜¯å®é™…é‡‡æ ·æ•°æ®

---

**3. probe4 (rd_addr) åœ°å€å˜åŒ–**ï¼š

åˆ‡æ¢æ˜¾ç¤ºæ ¼å¼ä¸º **Unsigned Decimal**ï¼š

```
rd_addr: 0 â†’ 1 â†’ 2 â†’ 3 â†’ ... â†’ 2046 â†’ 2047 â†’ ç¨³å®šåœ¨ 2047
```

**æ£€æŸ¥ç‚¹**ï¼š
- âœ… åœ°å€åº”è¯¥ä» 0 é¡ºåºé€’å¢åˆ° 2047
- âœ… æ¯æ¬¡ tx_valid=1 æ—¶ï¼Œrd_addr å¢åŠ  1
- âŒ å¦‚æœåœ°å€å¡åœ¨æŸä¸ªå€¼ä¸åŠ¨ï¼Œè¯´æ˜çŠ¶æ€æœºæœ‰é—®é¢˜

---

**4. probe6 (uart_tx) ä¸²å£æ³¢å½¢**ï¼š

æ”¾å¤§æ—¶é—´è½´ï¼ŒæŸ¥çœ‹å•ä¸ªå­—èŠ‚çš„å‘é€æ³¢å½¢ï¼š

```
uart_tx:  ___â”     â”Œâ”€â” â”Œâ”€â”   â”Œâ”€â” â”Œâ”€â”   â”Œâ”€â”€â”€â”€â”€
         IDLEâ”‚STARTâ”‚D0â”‚D1â”‚...â”‚D6â”‚D7â”‚STOPâ”‚IDLE
             â””â”€â”€â”€â”€â”€â”˜ â””â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”˜ â””â”€â”€â”€â”˜
             â† 434 clocks â†’ï¼ˆæ¯ä¸ª bitï¼‰
```

**æ£€æŸ¥ç‚¹**ï¼š
- âœ… Start bit åº”è¯¥æ˜¯ä½ç”µå¹³ï¼ŒæŒç»­ 434 ä¸ªæ—¶é’Ÿå‘¨æœŸï¼ˆ50MHz / 115200ï¼‰
- âœ… Stop bit åº”è¯¥æ˜¯é«˜ç”µå¹³ï¼ŒæŒç»­ 434 ä¸ªæ—¶é’Ÿå‘¨æœŸ
- âœ… æ•°æ®ä½æŒ‰ LSB first é¡ºåºå‘é€

---

#### å¯¼å‡ºæ•°æ®ï¼ˆå¯é€‰ï¼‰

å¦‚æœæƒ³ä¿å­˜ ILA æ•è·çš„æ•°æ®ï¼š

1. **å¯¼å‡º CSV**ï¼š
   - å³é”®ç‚¹å‡»æ³¢å½¢çª—å£
   - é€‰æ‹© **Export Waveform Data â†’ CSV**
   - ä¿å­˜ä¸º `ila_capture.csv`

2. **ä½¿ç”¨ Python åˆ†æ**ï¼š
   ```python
   import pandas as pd

   df = pd.read_csv('ila_capture.csv')
   tx_data = df['probe0_tx_data']
   tx_valid = df['probe1_tx_valid']

   # æå–æœ‰æ•ˆæ•°æ®ï¼ˆtx_valid=1 æ—¶çš„ tx_dataï¼‰
   valid_bytes = tx_data[tx_valid == 1].tolist()

   print(f"æ•è·åˆ° {len(valid_bytes)} å­—èŠ‚")
   print(f"å¸§å¤´: {valid_bytes[0]:02X} {valid_bytes[1]:02X}")
   ```

---

## ğŸ”§ å¸¸è§é—®é¢˜æ’æŸ¥

### Q1: Hardware Manager ä¸­çœ‹ä¸åˆ° ILA

**å¯èƒ½åŸå› **ï¼š
- âŒ ILA æ²¡æœ‰æ­£ç¡®æ·»åŠ åˆ°è®¾è®¡ä¸­
- âŒ Bitstream ç”Ÿæˆæ—¶æ²¡æœ‰åŒ…å«è°ƒè¯•ä¿¡æ¯

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ç»¼åˆåçš„ Netlistï¼Œç¡®è®¤æœ‰ `dbg_hub` å®ä¾‹
2. é‡æ–°ç”Ÿæˆ Bitstreamï¼Œç¡®ä¿å‹¾é€‰äº† "Include debug probes"
3. ä¸‹è½½æ—¶ç¡®ä¿åŠ è½½äº† `.ltx` æ–‡ä»¶ï¼ˆæ¢é’ˆå®šä¹‰æ–‡ä»¶ï¼‰

---

### Q2: ILA ä¸€ç›´ä¸è§¦å‘

**å¯èƒ½åŸå› **ï¼š
- âŒ è§¦å‘æ¡ä»¶è®¾ç½®é”™è¯¯
- âŒ FPGA æ²¡æœ‰æ‰§è¡Œé‡‡æ ·ï¼ˆæ²¡æŒ‰ RUN æŒ‰é’®ï¼‰
- âŒ busy ä¿¡å·ä¸€ç›´ä¸º 0ï¼ˆUART æ¨¡å—æ²¡å¯åŠ¨ï¼‰

**è§£å†³æ–¹æ³•**ï¼š
1. æ”¹ç”¨ **Always Trigger** æ¨¡å¼ï¼ˆä¸è®¾è§¦å‘æ¡ä»¶ï¼Œç«‹å³æ•è·ï¼‰
2. æ£€æŸ¥ probe7 (capture_done) æ˜¯å¦å˜ä¸º 1
3. æ£€æŸ¥ probe3 (busy) æ˜¯å¦æœ‰ä¸Šå‡æ²¿

---

### Q3: tx_data æ˜¾ç¤ºçš„å€¼ä¸å¯¹

**å¯èƒ½åŸå› **ï¼š
- âŒ BRAM æ•°æ®æ²¡æœ‰æ­£ç¡®å†™å…¥
- âŒ uart_bram_streamer çš„åœ°å€æœ‰é—®é¢˜
- âŒ æµ‹è¯•ä¿¡å·æºé€‰æ‹©é”™è¯¯ï¼ˆsw_test_patternï¼‰

**è§£å†³æ–¹æ³•**ï¼š
1. æ·»åŠ æ›´å¤šæ¢é’ˆç›‘æ§ BRAM å†™å…¥è¿‡ç¨‹
2. æ£€æŸ¥ test_signal_gen çš„è¾“å‡º
3. æŸ¥çœ‹ rd_data ä¿¡å·æ˜¯å¦æ­£ç¡®ï¼ˆéœ€è¦é¢å¤–æ·»åŠ æ¢é’ˆï¼‰

---

### Q4: uart_tx æ³¢å½¢ä¸è§„åˆ™

**å¯èƒ½åŸå› **ï¼š
- âŒ æ³¢ç‰¹ç‡åˆ†é¢‘å™¨è®¡ç®—é”™è¯¯
- âŒ æ—¶é’Ÿé¢‘ç‡ä¸æ˜¯ 50MHz
- âŒ uart_tx çŠ¶æ€æœºæœ‰ bug

**è§£å†³æ–¹æ³•**ï¼š
1. æµ‹é‡ uart_tx çš„ bit æ—¶é—´ï¼Œåº”è¯¥æ˜¯ 8.68 Î¼sï¼ˆ1/115200ï¼‰
2. æ£€æŸ¥ baud_cnt è®¡æ•°å™¨æ˜¯å¦æ­£ç¡®ï¼ˆåº”è¯¥æ•°åˆ° 433ï¼‰
3. æ·»åŠ æ¢é’ˆç›‘æ§ uart_tx æ¨¡å—çš„å†…éƒ¨çŠ¶æ€æœº

---

## ğŸ“Š éªŒè¯æ¸…å•

å®Œæˆ ILA è°ƒè¯•åï¼Œç¡®è®¤ä»¥ä¸‹æ‰€æœ‰é¡¹ï¼š

- [ ] ILA æˆåŠŸè§¦å‘å¹¶æ•è·æ•°æ®
- [ ] `tx_data` å‰ä¸¤å­—èŠ‚æ˜¯ `55 AA`ï¼ˆå¸§å¤´ï¼‰âœ…
- [ ] ç¬¬ 3-4 å­—èŠ‚æ˜¯ `00 08`ï¼ˆFrame Length = 2048ï¼‰âœ…
- [ ] `rd_addr` ä» 0 é€’å¢åˆ° 2047 âœ…
- [ ] `busy` ä¿¡å·æŒç»­çº¦ 178msï¼ˆ8,900,000 ä¸ªæ—¶é’Ÿå‘¨æœŸï¼‰âœ…
- [ ] `uart_tx` æ³¢å½¢ç¬¦åˆ 8N1 æ ¼å¼ âœ…
- [ ] æ¯ä¸ª bit æŒç»­çº¦ 434 ä¸ªæ—¶é’Ÿå‘¨æœŸï¼ˆ8.68 Î¼sï¼‰âœ…

**å¦‚æœä»¥ä¸Šéƒ½é€šè¿‡ï¼Œè¯´æ˜ FPGA å†…éƒ¨é€»è¾‘å®Œå…¨æ­£ç¡®ï¼** âœ…

---

## ğŸš€ ä¸‹ä¸€æ­¥

ILA éªŒè¯é€šè¿‡åï¼Œå¯ä»¥è¿›è¡Œå®é™…ç¡¬ä»¶é€šä¿¡æµ‹è¯•ï¼š

1. **è¿æ¥ CH340 æ¨¡å—**ï¼š
   - FPGA `uart_tx` â†’ CH340 `RXD`
   - FPGA `GND` â†’ CH340 `GND`

2. **è¿è¡Œ Python æ¥æ”¶è„šæœ¬**ï¼š
   - å‚è€ƒ `docs/UART_DEBUG_GUIDE.md`
   - ä½¿ç”¨ä¸²å£è°ƒè¯•åŠ©æ‰‹æˆ– Python è„šæœ¬æ¥æ”¶æ•°æ®

3. **å¼€å‘ä¸Šä½æœºè½¯ä»¶**ï¼š
   - æ³¢å½¢æ˜¾ç¤º
   - æ•°æ®åˆ†æ
   - å¯¼å‡ºåŠŸèƒ½

---

## ğŸ“š å‚è€ƒèµ„æ–™

- **Vivado å®˜æ–¹æ–‡æ¡£**ï¼š[Using the ILA Debug Core](https://www.xilinx.com/support/documentation/sw_manuals/xilinx2020_2/ug908-vivado-programming-debugging.pdf)
- **UART åè®®**ï¼š[Understanding UART](https://www.analog.com/en/analog-dialogue/articles/uart-a-hardware-communication-protocol.html)
- **æœ¬é¡¹ç›®æ–‡æ¡£**ï¼š
  - `docs/UART_DEBUG_GUIDE.md` - UART å®Œæ•´è°ƒè¯•æŒ‡å—
  - `src/uart_tx.v` - å·²æ·»åŠ è¯¦ç»†ä¸­æ–‡æ³¨é‡Š

---

**ç¥è°ƒè¯•é¡ºåˆ©ï¼** ğŸ‰
